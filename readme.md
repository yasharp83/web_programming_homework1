
# تمرین دستگرمی اول برنامه‌سازی وب
## یاشار پیمایی 401100325

این ریپازیتوری شامل یک صفحه html است که مطابق با [این pdf](tamrin_dastgarmi_1.pdf) طراحی شده است.

### index.html
فایل html شامل 3 بخش است که هر بخش تعدادی input دارد و یک output که براساس formula مشخص شده در formula.evaluator به صورت پویا براساس تغییرات ورودی ها تغییر میکند.

1. discount : $fee * number - discount$
2. BMI : $weight / (height^2)$
3. average : $(value1 + vlaue2)/2$

### style.css
در این بخش جزییات نمایش و فونت و رنگ هر المان صفحه را تعیین کرده ایم.

### script.js
<div style="direction: rtl; text-align: right;">

### عملکرد کد

1.  **رویداد `DOMContentLoaded`**: کد پس از بارگذاری کامل صفحه وب اجرا می‌شود.
2.  **انتخاب بخش‌های فرمول**: تمام عناصر با کلاس `formula_section` انتخاب می‌شوند.
3.  **پردازش هر بخش فرمول**: برای هر بخش فرمول، مراحل زیر انجام می‌شود:
    * **انتخاب ورودی‌ها**: تمام عناصر ورودی متنی (`input[type="text"]`) داخل بخش انتخاب می‌شوند.
    * **انتخاب عنصر فرمول**: عنصر `<formula>` که نتیجه محاسبه در آن نمایش داده می‌شود، انتخاب می‌شود.
    * **دریافت فرمول از ویژگی `evaluator`**: فرمول ریاضی از ویژگی `evaluator` عنصر `<formula>` دریافت می‌شود.
    * **افزودن listner به input ها**: افزودن یک eventlistner به هر یک از input ها تا در صورت تغییر هر یک صفحه آپدیت شود.
    * **تابع `updateFormula`**: این تابع فرمول را محاسبه و نتیجه را نمایش می‌دهد.

## تابع `updateFormula`

1.  **مقداردهی اولیه**: متغیرهای `formulaString`، `variables` و `flag` مقداردهی می‌شوند.
2.  **بررسی ورودی‌ها**: برای هر ورودی متنی، موارد زیر بررسی می‌شوند:
    * **اعتبار ورودی**: با استفاده از عبارت منظم (`regex`) بررسی می‌شود که مقدار ورودی یک عدد معتبر است یا خیر. اگر مقدار ورودی نامعتبر یا خالی باشد، متغیر `flag` برابر با `true` می‌شود.
    * **ذخیره مقدار ورودی**: مقدار ورودی به عنوان یک عدد اعشاری (`parseFloat`) در شیء `variables` ذخیره می‌شود. کلید شیء، `id` ورودی است.
    * **جایگزینی متغیرها در فرمول**: در فرمول `formulaString`، متغیرها با استفاده از `replaceAll` با مقدار متناظرشان از شیء `variables` جایگزین می‌شوند.
3.  **محاسبه فرمول**:
    * **بررسی اعتبار ورودی**: اگر `flag` برابر با `true` باشد (یعنی ورودی نامعتبر وجود داشته باشد)، متن عنصر `<formula>` تغییر می‌کند و رنگ آن قرمز می‌شود.
    * **محاسبه فرمول با `eval`**: فرمول `formulaString` با استفاده از `eval` محاسبه می‌شود.
    * **نمایش نتیجه**: نتیجه محاسبه با دو رقم اعشار در عنصر `<formula>` نمایش داده می‌شود و رنگ آن سبز می‌شود.
4.  **مدیریت خطا**: اگر خطایی در محاسبه فرمول رخ دهد، متن عنصر `<formula>` تغییر می‌کند و رنگ آن قرمز می‌شود.
5.  **اجرای اولیه تابع `updateFormula`**: در ابتدا تابع `updateFormula` یکبار اجرا میشود تا مقدار اولیه محاسبه شود.

</div>